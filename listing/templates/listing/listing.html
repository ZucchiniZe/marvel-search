{% extends 'base.html' %}

{% block title %}Listing all {{ synced|yesno:"synced," }} comics{% endblock %}

{% block content %}
  {% if query|length_is:"0" %}
    {% if synced %}
      <h2>There are no synced comics currently.</h2>
    {% else %}
      <h2>There are no titles, click <a href="{% url 'listing:refresh_comics' %}">here</a> to refresh them</h2>
    {% endif %}
  {% else %}
    <ul class="titles">
      {% for comic in query %}
        <li>
          <h2>
            <span class="scraped {{ comic.scraped|yesno }}">{{ comic.scraped|yesno:"✓,✗" }}</span>
            <a href="{% url 'listing:comic' comic.id %}">{{ comic.title }}</a>
          </h2>
          {{ comic.run }}
        </li>
      {% endfor %}
    </ul>
    {% if is_paginated %}
      <p>Showing results {{ page_obj.start_index }} - {{ page_obj.end_index }}</p>
      <div>
        {% if page_obj_obj.has_previous %}<a href="?page={{ page_obj.previous_page_number }}">{% endif %}&laquo; Previous{% if page_obj.has_previous %}</a>{% endif %}
        |
        {% for num in paginator.page_range %}
          {% ifequal num page_obj.number %}
            <span class="current"><b>{{ num }}</b></span>
          {% else %}
            <a href="?page={{ num }}"> {{ num }}</a>
          {% endifequal %}
        {% endfor %}
        |
        {% if page_obj.has_next %}<a href="?page={{ page_obj.next_page_number }}">{% endif %}Next &raquo;{% if page_obj.has_next %}</a>{% endif %}
      </div>
    {% endif %}
  {% endif %}
{% endblock %}